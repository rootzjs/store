"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.StoreManager=exports.default=void 0;var _react=_interopRequireWildcard(require("react")),_Rootz=_interopRequireWildcard(require("./Rootz"));function _getRequireWildcardCache(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return _getRequireWildcardCache=function(){return e},e}function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t=_getRequireWildcardCache();if(t&&t.has(e))return t.get(e);var a={};if(null!=e){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var o=r?Object.getOwnPropertyDescriptor(e,n):null;o&&(o.get||o.set)?Object.defineProperty(a,n,o):a[n]=e[n]}}return a.default=e,t&&t.set(e,a),a}function _defineProperty(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var a=[],r=!0,n=!1,o=void 0;try{for(var u,i=e[Symbol.iterator]();!(r=(u=i.next()).done)&&(a.push(u.value),!t||a.length!==t);r=!0);}catch(e){n=!0,o=e}finally{try{r||null==i.return||i.return()}finally{if(n)throw o}}return a}}function _arrayWithHoles(e){if(Array.isArray(e))return e}var store={},StoreManager={};exports.StoreManager=StoreManager;var defualtAppState={},componentStateHandler={},appState={},storeIdContainer={},key="cf11ba19a142955fc417a9fb2e509749",setImmutableObject=function(e,t){return Object.assign({},e,t)},getEnqueueStateHandler=function(e){return{enqueueStateHandler:function(e,t){this.updater.enqueueSetState(this,e,t,"setState")}.bind(e),onStoreUpdateHandler:function(e){this.onStoreUpdate({...appState[e],defualtAppState:defualtAppState})}.bind(e)}},setStateHandler=function(e,t,a){e.state={__rootzStateHandlerVariable:0},updateComponentStateHandler(t,{type:"class",state:e.state,stateHandler:getEnqueueStateHandler(e)}),updateAppState(t,a)},setStateHandlerForHook=function(e,t,a){var r={__rootzStateHandlerVariable:0};return updateComponentStateHandler(t,{type:"function",state:r}),updateAppState(t,a),function(a){var n=_slicedToArray((0,_react.useState)({...r}),2),o=(n[0],n[1]);return updateComponentStateHandler(t,{stateHandler:o}),_react.default.createElement(e,{props:a,state:{...appState[t],defualtAppState:defualtAppState}})}},updateAppState=function(e,t){appState[e]=setImmutableObject(appState[e],t)},updateComponentStateHandler=function(e,t){componentStateHandler[e]=setImmutableObject(componentStateHandler[e],t)},executeHandler=function(e,t){var a=componentStateHandler[t],r=a.state.__rootzStateHandlerVariable;updateAppState(t,e),a.hasOwnProperty("stateHandler")?(a.stateHandler.onStoreUpdateHandler(t),a.stateHandler.enqueueStateHandler({__rootzStateHandlerVariable:r+1})):console.error('Property "'.concat(t,'" is defined in @rootzjs/store but not used, Please comment / remove the definition.'))},executeHandlerForHook=function(e,t){var a=componentStateHandler[t],r=a.state.__rootzStateHandlerVariable;updateAppState(t,e),a.hasOwnProperty("stateHandler")?a.stateHandler({__rootzStateHandlerVariable:r+1}):console.error('Property "'.concat(t,'" is defined in @rootzjs/store but not used, Please comment / remove the definition.'))};StoreManager.setState=function(e,t){updateAppState(e,t)},StoreManager.getState=function(e){return{...appState[e],defualtAppState:defualtAppState}},StoreManager.setHandler=function(e,t){componentStateHandler[e]=setImmutableObject(componentStateHandler[e],{stateHandler:t})},StoreManager.setHandlerVariable=function(e,t){componentStateHandler=setImmutableObject(componentStateHandler,_defineProperty({},e,{type:"function",state:t}))},StoreManager.requestUpdate=function(e){var t=componentStateHandler[e],a=t.state.__rootzStateHandlerVariable;t.stateHandler({__rootzStateHandlerVariable:a+1})},StoreManager.setContext=function(e){store.setDefualt(e)},StoreManager.getContext=function(){return defualtAppState},store.add=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if("function"==typeof e)return null===a&&(a=e.name),appState.hasOwnProperty(a)?void console.error('property "'.concat(a,'" already exists in @rootzjs/store, Use "id" param from store.add(scope, state, id) { }, to provide a unique name / id')):setStateHandlerForHook(e,a,t);null===a&&(a=e.constructor.name),appState.hasOwnProperty(a)?console.error('property "'.concat(a,'" already exists in @rootzjs/store, Use "id" param from store.add(scope, state, id) { }, to provide a unique name / id')):setStateHandler(e,a,t)},store.update=function(e){return function(t,a){var r=componentStateHandler[e].type;"class"===r?executeHandler(a&&"function"==typeof a?a(appState[e],t):t||appState[e],e):"function"===r&&executeHandlerForHook(a&&"function"==typeof a?a(appState[e],t):t||appState[e],e)}},store.setDefualt=function(e){defualtAppState=setImmutableObject(defualtAppState,e)};var _default=store;exports.default=_default;