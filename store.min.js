"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _react=_interopRequireWildcard(require("react"));function _getRequireWildcardCache(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return _getRequireWildcardCache=function(){return e},e}function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t=_getRequireWildcardCache();if(t&&t.has(e))return t.get(e);var r={};if(null!=e){var a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var o=a?Object.getOwnPropertyDescriptor(e,n):null;o&&(o.get||o.set)?Object.defineProperty(r,n,o):r[n]=e[n]}}return r.default=e,t&&t.set(e,r),r}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var r=[],a=!0,n=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(a=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);a=!0);}catch(e){n=!0,o=e}finally{try{a||null==l.return||l.return()}finally{if(n)throw o}}return r}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var appState={},storeIdContainer={},componentStateHandler={},store={},setImmutableObject=function(e,t){return Object.assign({},e,t)},getEnqueueStateHandler=function(e){return{enqueueStateHandler:function(e,t){this.updater.enqueueSetState(this,e,t,"setState")}.bind(e),onStoreUpdateHandler:function(e){this.onStoreUpdate(appState[e])}.bind(e)}},setStateHandler=function(e,t,r){e.state={__rootzStateHandlerVariable:0},componentStateHandler=setImmutableObject(componentStateHandler,_defineProperty({},t,{type:"class",state:e.state,stateHandler:getEnqueueStateHandler(e)})),updateAppState(t,r)},setStateHandlerForHook=function(e,t,r){var a={__rootzStateHandlerVariable:0};return componentStateHandler=setImmutableObject(componentStateHandler,_defineProperty({},t,{type:"function",state:a})),updateAppState(t,r),function(r){var n=_slicedToArray((0,_react.useState)({...a}),2),o=(n[0],n[1]);return componentStateHandler[t]=setImmutableObject(componentStateHandler[t],{stateHandler:o}),_react.default.createElement(e,{props:r,state:appState[t]})}},updateAppState=function(e,t){appState[e]=setImmutableObject(appState[e],t)},executeHandler=function(e,t){var r=componentStateHandler[t],a=r.state.__rootzStateHandlerVariable;updateAppState(t,e),r.hasOwnProperty("stateHandler")?(r.stateHandler.onStoreUpdateHandler(t),r.stateHandler.enqueueStateHandler({__rootzStateHandlerVariable:a+1})):console.error('Property "'.concat(t,'" is defined in @rootzjs/store but not used, Please comment / remove the definition.'))},executeHandlerForHook=function(e,t){var r=componentStateHandler[t],a=r.state.__rootzStateHandlerVariable;updateAppState(t,e),r.hasOwnProperty("stateHandler")?r.stateHandler({__rootzStateHandlerVariable:a+1}):console.error('Property "'.concat(t,'" is defined in @rootzjs/store but not used, Please comment / remove the definition.'))};store.add=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if("function"==typeof e)return null===r&&(r=e.name),appState.hasOwnProperty(r)?void console.error('property "'.concat(r,'" already exists in @rootzjs/store, Use "id" param from store.add(scope, state, id) { }, to provide a unique name / id')):setStateHandlerForHook(e,r,t);null===r&&(r=e.constructor.name),appState.hasOwnProperty(r)?console.error('property "'.concat(r,'" already exists in @rootzjs/store, Use "id" param from store.add(scope, state, id) { }, to provide a unique name / id')):setStateHandler(e,r,t)},store.update=function(e){return function(t,r){var a=componentStateHandler[e].type;"class"===a?executeHandler(r&&"function"==typeof r?r(appState[e],t):t||appState[e],e):"function"===a&&executeHandlerForHook(r&&"function"==typeof r?r(appState[e],t):t||appState[e],e)}};var _default=store;exports.default=_default;